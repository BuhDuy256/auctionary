@startuml ActivityDangKyNangCap
' --- Cài đặt Sơ đồ ---
skinparam activity {
    BackgroundColor PaleGreen
    BorderColor Green
}
skinparam swimlane {
    BackgroundColor WhiteSmoke
    BorderColor RoyalBlue
}

' --- Bắt đầu Sơ đồ ---
|Guest|
start
:Truy cập trang đăng ký;
:Điền thông tin và xác thực reCaptcha;

|System|
:Kiểm tra dữ liệu;
:Mã hóa mật khẩu;
:Gửi mã OTP xác thực email;

|Guest|
:Nhập mã OTP;

|System|
:Xác thực OTP;
:Tạo tài khoản Bidder mới;
:Thông báo đăng ký thành công;
:Tự động đăng nhập;

|Bidder|
:Sử dụng hệ thống với vai trò Bidder;

if (Muốn trở thành Seller?) then (Có)
    :Gửi yêu cầu nâng cấp lên Seller;

    |System|
    :Lưu yêu cầu nâng cấp;
    :Thông báo cho Admin;

    |Admin|
    :Kiểm tra danh sách yêu cầu nâng cấp;
    :Xem thông tin Bidder;
    :Thực hiện duyệt (UC-10);

    |System|
    if (Admin Duyệt?) then (Duyệt)
        :Cập nhật vai trò Bidder thành Seller;
        :Gửi email thông báo "Duyệt thành công"
        cho người dùng;
        
        |Seller|
        :Bắt đầu sử dụng hệ thống
        với vai trò Seller;
    else (Từ chối)
        :Gửi email thông báo "Từ chối"
        cho người dùng;
        
        |Bidder|
        :Tiếp tục sử dụng hệ thống
        với vai trò Bidder;
    endif
else (Không)
    :Tiếp tục sử dụng hệ thống
    với vai trò Bidder;
endif

stop
@enduml
