@startuml UC-06-Them-vao-Watch-List

title UC-06: Thêm vào Watch List

actor "Bidder" as Bidder
participant "Frontend\n(ProductListPage/\nProductDetailPage)" as Frontend
participant "Backend" as Backend
participant "DB" as DB

note over Frontend
  UI Components:
  - Icon "Bookmark/Heart" trên card sản phẩm
  - Nút "Add to Watch List" trong chi tiết
  - Toast notification
end note

alt Từ trang danh sách sản phẩm
    Bidder -> Frontend: Click icon "Bookmark" trên card sản phẩm
else Từ trang chi tiết sản phẩm
    Bidder -> Frontend: Click nút "Add to Watch List"
end

Frontend -> Backend: Thêm vào Watch List\n(productId, userId)
activate Backend

Backend -> DB: Kiểm tra sản phẩm đã trong Watch List
activate DB
DB --> Backend: Kết quả kiểm tra
deactivate DB

alt Sản phẩm đã có trong Watch List
    Backend --> Frontend: Lỗi: Sản phẩm đã trong Watch List
    deactivate Backend
    Frontend --> Bidder: Hiển thị thông báo
else Sản phẩm chưa có trong Watch List
    Backend -> DB: Lưu vào Watch List
    activate DB
    DB --> Backend: Lưu thành công
    deactivate DB
    
    Backend --> Frontend: Thêm thành công
    deactivate Backend
    
    Frontend -> Frontend: Cập nhật icon (filled/active)
    Frontend --> Bidder: Hiển thị thông báo thành công
end

note over Bidder
  Bidder có thể xem danh sách
  Watch List trong Profile Page
end note

@enduml
